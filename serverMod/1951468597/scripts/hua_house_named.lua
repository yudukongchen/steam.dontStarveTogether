local function XpkjA(XL_,WYdR)if WYdR~=nil and type(WYdR)=="string"then if XL_.hua_house_named~=nil and XL_.hua_house_named.components.named~=nil then XL_.hua_house_named.components.named.housename=WYdR;if XL_.hua_house_named.components.named.name~=nil then local QKKks_zt=XL_.hua_house_named.components.named.name;local Are7xU=QKKks_zt:match("所有者.+")if Are7xU~=nil then WYdR=WYdR.."\n"..Are7xU end end;XL_.hua_house_named.components.named:SetName(WYdR)XL_.hua_house_named=nil end end end;AddModRPCHandler("huahouse_name","rename",XpkjA)local pVRj=Action({priority=1,mount_valid=true})pVRj.id="HUA_RENAME_HOUSE"pVRj.str=STRINGS.HUA_RENAME_HOUSE;local fuZ3z86={hua_player_house=1,hua_player_house1=2,hua_player_house_pvz=3,hua_player_house_tardis=4} pVRj.fn=function(yxjl)if yxjl.invobject and yxjl.doer and yxjl.target then if yxjl.target._ownerid~=nil and yxjl.target._ownerid~=yxjl.doer.userid then return false,"NOOWNER"end;local ZG=fuZ3z86[yxjl.target.prefab]or 1;yxjl.doer._inhuaname:set_local(0)yxjl.doer._inhuaname:set(ZG)yxjl.doer.hua_house_named=yxjl.target;yxjl.invobject:Remove()return true end end;AddAction(pVRj)AddComponentAction("USEITEM","hua_house_named",function(Vu0cCAf,q,kP7O5,lqT)if kP7O5:HasTag("hua_house_named")then table.insert(lqT,ACTIONS.HUA_RENAME_HOUSE)end end)AddStategraphActionHandler("wilson",ActionHandler(ACTIONS.HUA_RENAME_HOUSE,"give"))AddStategraphActionHandler("wilson_client",ActionHandler(ACTIONS.HUA_RENAME_HOUSE,"give"))local er=require"widgets/huahouse_writeablewidget"local function DFb100j(mP3mlD)function mP3mlD:ShowHusHouseWriteableWidget(PrPyxMK,tczrIB)if PrPyxMK==nil then return else mP3mlD.huahouse_writeablescreen=er(mP3mlD.owner,PrPyxMK,tczrIB)mP3mlD:OpenScreenUnderPause(mP3mlD.huahouse_writeablescreen)if TheFrontEnd:GetActiveScreen()==mP3mlD.huahouse_writeablescreen then mP3mlD.huahouse_writeablescreen.edit_text:SetEditing(true)end;return mP3mlD.huahouse_writeablescreen end end;function mP3mlD:CloseHusHouseWriteableWidget()if mP3mlD.huahouse_writeablescreen then mP3mlD.huahouse_writeablescreen:Close()mP3mlD.huahouse_writeablescreen=nil end end end;AddClassPostConstruct("screens/playerhud",DFb100j)